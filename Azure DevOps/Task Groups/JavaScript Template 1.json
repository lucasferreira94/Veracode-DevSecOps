{"tasks":[{"environment":{},"displayName":"Install and ZIP Archive files to Upload and Scan ","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"script":"sudo apt install zip unzip -y\n\nzip -v -r upload.zip . -i $(System.DefaultWorkingDirectory) -i '*.asp' '*.css' '*.ehtml' '*.'es' '*.'es6 *.handlebars' '*.hbs' '*.hjs' '*.htm' '*.html' '*.js' '*.jsx' '*.json' '*.jsp' '*.ts' '*.tsx' '*.vue' '*.xhmtl'\n","workingDirectory":"","failOnStderr":"false"},"task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Veracode SCA agent-based","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"script":"export SRCCLR_API_TOKEN=$(SRCCLR_API_TOKEN)\nexport SRCCLR_SCM_URI=$(Build.Repository.Uri)\nexport SRCCLR_SCM_REF=$(Build.SourceBranchName)\nexport SRCCLR_SCM_REF_TYPE=\"branch\"\nexport SRCCLR_SCM_REV=$(Build.SourceVersion)     \n\ncurl -sSL https://download.sourceclear.com/ci.sh | bash -s â€“ scan  --update-advisor || true","workingDirectory":"","failOnStderr":"false"},"task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Veracode SAST Sandbox Scan","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"ConnectionDetailsSelection":"Credentials","AnalysisService":"","apiId":"$(VID)","apiKey":"$(VKEY)","veracodeAppProfile":"NodeGoat-Demo","version":"$(build.buildNumber)","filepath":"$(System.DefaultWorkingDirectory)/upload.zip","sandboxName":"SANDBOX_1","createSandBox":"true","optargs":"","createProfile":"true","failBuildIfUploadAndScanBuildStepFails":"false","importResults":"false","failBuildOnPolicyFail":"false","maximumWaitTime":"360"},"task":{"id":"6292a058-d4f5-407b-b6c6-815df9ee59d6","versionSpec":"3.*","definitionType":"task"}},{"environment":{},"displayName":"Veracode SAST Policy Scan","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"ConnectionDetailsSelection":"Credentials","AnalysisService":"","apiId":"$(VID)","apiKey":"$(VKEY)","veracodeAppProfile":"NodeGoat-Demo","version":"$(build.buildNumber)","filepath":"$(System.DefaultWorkingDirectory)/upload.zip","sandboxName":"","createSandBox":"false","optargs":"","createProfile":"true","failBuildIfUploadAndScanBuildStepFails":"false","importResults":"false","failBuildOnPolicyFail":"false","maximumWaitTime":"360"},"task":{"id":"6292a058-d4f5-407b-b6c6-815df9ee59d6","versionSpec":"3.*","definitionType":"task"}},{"environment":{},"displayName":"Veracode SAST Pipeline Scan","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"script":" curl -sSO https://downloads.veracode.com/securityscan/pipeline-scan-LATEST.zip\n unzip -o pipeline-scan-LATEST.zip\n      \n java -jar pipeline-scan.jar -vid $(VID) -vkey $(VKEY) -f $(System.DefaultWorkingDirectory)/upload.zip || true","workingDirectory":"","failOnStderr":"false"},"task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"2.*","definitionType":"task"}}],"runsOn":["Agent","DeploymentGroup"],"revision":3,"createdBy":{"displayName":"lucas.ferreira","id":"90fcdba4-f2f2-6409-ad6d-5d1a67fc6b75","uniqueName":"lucas.ferreira@m3corp.com.br"},"createdOn":"2023-09-28T18:34:29.180Z","modifiedBy":{"displayName":"lucas.ferreira","id":"90fcdba4-f2f2-6409-ad6d-5d1a67fc6b75","uniqueName":"lucas.ferreira@m3corp.com.br"},"modifiedOn":"2023-09-28T18:36:11.843Z","comment":"","id":"604070f8-5448-4a93-a313-f8bb1da48ee6","name":"JavaScript Template 1","version":{"major":1,"minor":0,"patch":0,"isTest":false},"iconUrl":"https://cdn.vsassets.io/v/M228_20230927.3/_content/icon-meta-task.png","friendlyName":"JavaScript Template 1","description":"1. Install ZIP and Unzip and archive JS/TS app files\n2. SCA agent based\n3. Plugin Veracode Sandbox Scan\n4. Plugin Veracode Policy San\n5. Veracode Pipeline Scan without break build","category":"Build","definitionType":"metaTask","author":"lucas.ferreira","demands":[],"groups":[],"inputs":[{"aliases":[],"options":{},"properties":{},"name":"SRCCLR_API_TOKEN","label":"SRCCLR_API_TOKEN","defaultValue":"","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"VID","label":"VID","defaultValue":"","required":true,"type":"string","helpMarkDown":"Enter your Veracode API ID. For instructions on generating your API credentials, go to the Veracode Documentation and search for \"Generate Veracode API Credentials\".","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"VKEY","label":"VKEY","defaultValue":"","required":true,"type":"string","helpMarkDown":"Enter your Veracode API key. For instructions on generating your API credentials, go to the Veracode Documentation and search for \"Generate Veracode API Credentials\".","groupName":""}],"satisfies":[],"sourceDefinitions":[],"dataSourceBindings":[],"instanceNameFormat":"Task group: JavaScript Template 1 $(SRCCLR_API_TOKEN)","preJobExecution":{},"execution":{},"postJobExecution":{},"_buildConfigMapping":{}}