{"tasks":[{"environment":{},"displayName":"VeracodePackager","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"target":"$(build.artifactstagingdirectory)\\bin","output":"$(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip","platform":"Dotnet"},"task":{"id":"fa4c6810-15bc-49e4-bc15-d268839fa01a","versionSpec":"0.*","definitionType":"task"}},{"environment":{"SRCCLR_SCM_URI":"$(Build.Repository.Uri)","SRCCLR_SCM_REF":"$(Build.SourceBranchName)","SRCCLR_SCM_REF_TYPE":"'branch'","SRCCLR_SCM_REV":"$(Build.SourceVersion)","SRCCLR_API_TOKEN":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MjI3ODI2LCJleHAiOjE2MjgyODc0OTAsImF1dGhvcml0aWVzIjoiQUdFTlQiLCJqdGkiOiI3ZTdiYTY3NS02MmEyLTQ4YzEtYjBlNi0yMjZhNWJkN2I0MWYiLCJjbGllbnRfaWQiOiIiLCJzY29wZSI6W119.mYX-HgOd0vNyhcHwtLR5KaIcPX-Z5ppCDjj4xQT162Hl8V-HY8PZxhkrwcDF1TG4k6bvnjwbHT3sbonE05QQQ7A-IJ1G8zOCCqLqmbJ4kanlPfI9i8koqD7bFQQW_-SwpR_qbH5jWmKjmXbo53oFW0RqJ8KL9tnoFQ13TpnqK9I"},"displayName":"Veracode SCA - Software Composition Analysis ","alwaysRun":false,"continueOnError":true,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"$env:SRCCLR_API_TOKEN\n$env:SRCCLR_API_TOKEN='$(SRCCLR_API_TOKEN)'\n$env:SRCCLR_SCM_URI='$(Build.Repository.Uri)'\n$env:SRCCLR_SCM_REF='$(Build.SourceBranchName)'\n$env:SRCCLR_SCM_REF_TYPE='branch'\n$env:SRCCLR_SCM_REV='$(Build.SourceVersion)'\n\nSet-ExecutionPolicy AllSigned -Scope Process -Force\n\n$ProgressPreference = \"silentlyContinue\"; iex ((New-Object System.Net.WebClient).DownloadString('https://download.sourceclear.com/ci.ps1'))\n\nsrcclr scan $(Build.SourcesDirectory)","errorActionPreference":"silentlyContinue","warningPreference":"default","informationPreference":"default","verbosePreference":"default","debugPreference":"default","progressPreference":"silentlyContinue","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"$(build.artifactstagingdirectory)","runScriptInSeparateScope":"false"},"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Veracode SAST - Sandbox Scan","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"ConnectionDetailsSelection":"Service Connection","AnalysisService":"b9d16eb9-5bbe-4ecc-ac62-341dc31674fe","apiId":"","apiKey":"","veracodeAppProfile":"WebGoat-dotNET","version":"$(build.buildNumber)","filepath":"$(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip","sandboxName":"$(Build.SourceBranchName)","createSandBox":"true","optargs":"deleteincompletescan 2","createProfile":"true","failBuildIfUploadAndScanBuildStepFails":"false","importResults":"false","failBuildOnPolicyFail":"false","maximumWaitTime":"30"},"task":{"id":"6292a058-d4f5-407b-b6c6-815df9ee59d6","versionSpec":"3.*","definitionType":"task"}},{"environment":{},"displayName":"Veracode SAST - Policy Scan","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"ConnectionDetailsSelection":"Service Connection","AnalysisService":"b9d16eb9-5bbe-4ecc-ac62-341dc31674fe","apiId":"","apiKey":"","veracodeAppProfile":"WebGoat-dotNET","version":"$(build.buildNumber)","filepath":"$(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip","sandboxName":"","createSandBox":"false","optargs":"teams Showroom_Lucas deleteincompletescan 2","createProfile":"true","failBuildIfUploadAndScanBuildStepFails":"false","importResults":"false","failBuildOnPolicyFail":"false","maximumWaitTime":"30"},"task":{"id":"6292a058-d4f5-407b-b6c6-815df9ee59d6","versionSpec":"3.*","definitionType":"task"}},{"environment":{},"displayName":"Veracode SAST - Pipeline Scan","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"script":"curl -sSO https://downloads.veracode.com/securityscan/pipeline-scan-LATEST.zip\n\nunzip -o pipeline-scan-LATEST.zip\n\njava -jar pipeline-scan.jar -vid $(VERACODE_ID) -vkey $(VERACODE_KEY) -f $(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip --include DotNetGoat* --project_name WebGoat-dotNET-CI  -pn \"Veracode Recommended High\"","workingDirectory":"","failOnStderr":"false"},"task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"2.*","definitionType":"task"}}],"runsOn":["Agent","DeploymentGroup"],"revision":1,"createdBy":{"displayName":"lucas.ferreira","id":"90fcdba4-f2f2-6409-ad6d-5d1a67fc6b75","uniqueName":"lucas.ferreira@m3corp.com.br"},"createdOn":"2023-09-04T19:46:40.990Z","modifiedBy":{"displayName":"lucas.ferreira","id":"90fcdba4-f2f2-6409-ad6d-5d1a67fc6b75","uniqueName":"lucas.ferreira@m3corp.com.br"},"modifiedOn":"2023-09-04T19:46:40.990Z","id":"f3d9bd02-703a-47f2-b55e-4fa43ee8ea25","name":"Veracode - .NET Windows Agent","version":{"major":1,"minor":0,"patch":0,"isTest":false},"iconUrl":"https://cdn.vsassets.io/v/M226_20230901.2/_content/icon-meta-task.png","friendlyName":"Veracode - .NET Windows Agent","description":"Veracode packager + Powershell SCA + Sandbox Branch Name + Policy Scan Async + Pipeline Scan break build","category":"Build","definitionType":"metaTask","author":"lucas.ferreira","demands":[],"groups":[],"inputs":[{"aliases":[],"options":{},"properties":{},"name":"SRCCLR_API_TOKEN","label":"SRCCLR_API_TOKEN","defaultValue":"","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"VERACODE_ID","label":"VERACODE_ID","defaultValue":"","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"VERACODE_KEY","label":"VERACODE_KEY","defaultValue":"","required":true,"type":"string","helpMarkDown":"","groupName":""}],"satisfies":[],"sourceDefinitions":[],"dataSourceBindings":[],"instanceNameFormat":"Task group: Veracode - .NET Windows Agent $(SRCCLR_API_TOKEN)","preJobExecution":{},"execution":{},"postJobExecution":{},"_buildConfigMapping":{}}
