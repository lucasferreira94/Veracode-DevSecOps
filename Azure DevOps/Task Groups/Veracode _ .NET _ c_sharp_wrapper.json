{"tasks":[{"environment":{},"displayName":"Archive $(Build.ArtifactStagingDirectory)\\bin","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"rootFolderOrFile":"$(build.artifactstagingdirectory)\\bin","includeRootFolder":"true","archiveType":"zip","sevenZipCompression":"normal","tarCompression":"gz","archiveFile":"$(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip","replaceExistingArchive":"true","verbose":"true","quiet":"false"},"task":{"id":"d8b84976-e99a-4b86-b885-4849694435b0","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Veracode SCA agent-based","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"$env:SRCCLR_API_TOKEN\n$env:SRCCLR_API_TOKEN='$(SRCCLR_API_TOKEN)'\n$env:SRCCLR_SCM_URI='$(Build.Repository.Uri)'\n$env:SRCCLR_SCM_REF='$(Build.SourceBranchName)'\n$env:SRCCLR_SCM_REF_TYPE='branch'\n$env:SRCCLR_SCM_REV='$(Build.SourceVersion)'\n\nSet-ExecutionPolicy AllSigned -Scope Process -Force\n\n$ProgressPreference = \"silentlyContinue\"; iex ((New-Object System.Net.WebClient).DownloadString('https://download.sourceclear.com/ci.ps1'))\n\n\nsrcclr scan $(Build.SourcesDirectory)","errorActionPreference":"stop","warningPreference":"default","informationPreference":"default","verbosePreference":"default","debugPreference":"default","progressPreference":"silentlyContinue","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"},"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Download Veracode C# wrapper","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"script":"curl -sSO https://tools.veracode.com/integrations/API-Wrappers/CSharp/bin/VeracodeCSharpAPI.zip\n\nunzip -o VeracodeCSharpAPI.zip\n","workingDirectory":"","failOnStderr":"false"},"task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Veracode SAST Sandbox Scan","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"script":".\\VeracodeC#API.exe -vid $(VID) -vkey $(VKEY) -action uploadandscan -appname \"WebGoat-dotNET\" -createprofile true -criticality VeryHigh -teams Showroom_Lucas -filepath $(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip -createsandbox true -sandboxname \"SANDBOX_1\" -version $(build.buildNumber)","workingDirectory":"","failOnStderr":"false"},"task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Veracode SAST Policy Scan ","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"script":".\\VeracodeC#API.exe -vid $(VID) -vkey $(VKEY) -action uploadandscan -appname \"WebGoat-dotNET\" -createprofile true -criticality VeryHigh -teams Showroom_Lucas -filepath $(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip -version $(build.buildNumber)","workingDirectory":"","failOnStderr":"false"},"task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"2.*","definitionType":"task"}}],"runsOn":["Agent","DeploymentGroup"],"revision":2,"createdBy":{"displayName":"lucas.ferreira","id":"90fcdba4-f2f2-6409-ad6d-5d1a67fc6b75","uniqueName":"lucas.ferreira@m3corp.com.br"},"createdOn":"2023-09-28T17:36:27.620Z","modifiedBy":{"displayName":"lucas.ferreira","id":"90fcdba4-f2f2-6409-ad6d-5d1a67fc6b75","uniqueName":"lucas.ferreira@m3corp.com.br"},"modifiedOn":"2023-09-28T17:38:16.117Z","comment":"","id":"89b15670-5e3b-45ec-a332-749f1ece380f","name":"Veracode | .NET | Zip Archive + SCA + Sandbox + Policy Scan","version":{"major":1,"minor":0,"patch":0,"isTest":false},"iconUrl":"https://cdn.vsassets.io/v/M228_20230927.3/_content/icon-meta-task.png","friendlyName":"Veracode | .NET | Zip Archive + SCA + Sandbox + Policy Scan","description":"1. Zip archive dlls\n2. Veracode SCA agent by powershell\n3. Download C# wrapper\n4. Sandbox Scan by C# wrapper\n5. Policy Scan by C# wrapper","category":"Build","definitionType":"metaTask","author":"lucas.ferreira","demands":[],"groups":[],"inputs":[{"aliases":[],"options":{},"properties":{},"name":"SRCCLR_API_TOKEN","label":"SRCCLR_API_TOKEN","defaultValue":"","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"VID","label":"VID","defaultValue":"","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"VKEY","label":"VKEY","defaultValue":"","required":true,"type":"string","helpMarkDown":"","groupName":""}],"satisfies":[],"sourceDefinitions":[],"dataSourceBindings":[],"instanceNameFormat":"Task group: Veracode | .NET | Zip Archive + SCA + Sandbox + Policy Scan $(SRCCLR_API_TOKEN)","preJobExecution":{},"execution":{},"postJobExecution":{},"_buildConfigMapping":{}}